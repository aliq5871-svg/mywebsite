<!doctype html>
<html lang="ms">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portal Rasmi Sektor Pengurusan Sekolah PPD Kota Marudu</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&amp;family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    *, *::before, *::after {
      box-sizing: inherit;
      margin: 0;
      padding: 0;
    }
    
    html, body {
      height: 100%;
      width: 100%;
    }
    
    :root {
      --light-blue: #667eea;
      --white: #ffffff;
      --light-grey: #f7fafc;
      --text-dark: #1a202c;
      --text-light: #4a5568;
      --accent-blue: #764ba2;
      --shadow-soft: 0 4px 20px rgba(102, 126, 234, 0.15);
      --shadow-hover: 0 8px 30px rgba(118, 75, 162, 0.25);
      --glow-blue: 0 0 25px rgba(102, 126, 234, 0.5);
      
      --dark-bg: #0f0f23;
      --dark-surface: #1a1a3e;
      --dark-text: #f0f4ff;
      --dark-text-secondary: #a0aec0;
      --neon-blue: #00f5ff;
      --neon-glow: 0 0 25px rgba(0, 245, 255, 0.7);
    }
    
    body {
      font-family: 'Poppins', 'Inter', sans-serif;
      background: var(--light-grey);
      color: var(--text-dark);
      transition: background 0.4s ease, color 0.4s ease;
      overflow-x: hidden;
    }
    
    body.dark-mode {
      background: var(--dark-bg);
      color: var(--dark-text);
    }
    
    .app-container {
      width: 100%;
      min-height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .bg-animation {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
      opacity: 0.3;
    }
    
    .bg-animation.light {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #ffd3a5 100%);
      opacity: 0.15;
    }
    
    .bg-animation.dark {
      background: radial-gradient(circle at 20% 50%, rgba(0, 245, 255, 0.15) 0%, transparent 50%),
                  radial-gradient(circle at 80% 80%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
                  radial-gradient(circle at 50% 20%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
      opacity: 0.3;
    }
    
    header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      box-shadow: var(--shadow-soft);
      transition: all 0.4s ease;
      animation: slideDown 0.6s ease;
    }
    
    body.dark-mode header {
      background: linear-gradient(135deg, #00f5ff 0%, #667eea 50%, #764ba2 100%);
      box-shadow: 0 4px 20px rgba(0, 245, 255, 0.3);
    }
    
    @keyframes slideDown {
      from {
        transform: translateY(-100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }
    
    .logo-section {
      display: flex;
      align-items: center;
      gap: 1rem;
      animation: fadeIn 0.8s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateX(-20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .logo-circle {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-soft);
      transition: all 0.3s ease;
      overflow: hidden;
      flex-shrink: 0;
      padding: 4px;
    }
    
    .logo-circle img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    
    .logo-circle .logo-emoji {
      font-size: 2.5rem;
      line-height: 1;
    }
    
    body.dark-mode .logo-circle {
      background: linear-gradient(135deg, #00f5ff 0%, #667eea 50%, #764ba2 100%);
      box-shadow: var(--neon-glow);
    }
    
    .logo-circle:hover {
      transform: scale(1.1) rotate(5deg);
      box-shadow: var(--shadow-hover);
    }
    
    .school-info h1 {
      font-size: 1.2rem;
      font-weight: 600;
      color: #ffffff;
      margin: 0;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }
    
    body.dark-mode .school-info h1 {
      color: #ffffff;
      text-shadow: var(--neon-glow);
    }
    
    .school-info p {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
    }
    
    body.dark-mode .school-info p {
      color: rgba(255, 255, 255, 0.9);
    }
    
    .header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    
    .datetime-display {
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.95);
      text-align: right;
    }
    
    body.dark-mode .datetime-display {
      color: rgba(255, 255, 255, 0.95);
    }
    
    .theme-toggle {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      border: none;
      background: linear-gradient(135deg, #ffd3a5 0%, #fd6585 100%);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      transition: all 0.3s ease;
      box-shadow: var(--shadow-soft);
    }
    
    .theme-toggle:hover {
      transform: scale(1.1) rotate(15deg);
      box-shadow: var(--shadow-hover);
    }
    
    body.dark-mode .theme-toggle {
      background: linear-gradient(135deg, #667eea 0%, #00f5ff 100%);
      box-shadow: var(--neon-glow);
    }
    
    .btn-login {
      padding: 0.6rem 1.5rem;
      border-radius: 25px;
      border: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: var(--shadow-soft);
      font-size: 0.9rem;
    }
    
    .btn-login:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
    
    body.dark-mode .btn-login {
      background: linear-gradient(135deg, #00f5ff 0%, #667eea 50%, #764ba2 100%);
      box-shadow: var(--neon-glow);
    }
    
    .main-layout {
      display: flex;
      flex: 1;
      max-width: 1400px;
      margin: 0 auto;
      width: 100%;
      position: relative;
      z-index: 1;
    }
    
    .sidebar {
      width: 260px;
      background: var(--white);
      box-shadow: var(--shadow-soft);
      padding: 2rem 0;
      transition: all 0.4s ease;
      position: sticky;
      top: 80px;
      height: calc(100% - 80px);
      overflow-y: auto;
    }
    
    body.dark-mode .sidebar {
      background: var(--dark-surface);
    }
    
    .sidebar.collapsed {
      width: 70px;
    }
    
    .sidebar-toggle {
      display: none;
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--accent-blue);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: var(--shadow-hover);
      z-index: 101;
      transition: all 0.3s ease;
    }
    
    body.dark-mode .sidebar-toggle {
      background: var(--neon-blue);
      box-shadow: var(--neon-glow);
    }
    
    .nav-menu {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    
    .nav-item {
      margin: 0.5rem 0;
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem 1.5rem;
      color: var(--text-dark);
      text-decoration: none;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    body.dark-mode .nav-link {
      color: var(--dark-text);
    }
    
    .nav-link::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 4px;
      background: var(--accent-blue);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }
    
    body.dark-mode .nav-link::before {
      background: var(--neon-blue);
      box-shadow: var(--neon-glow);
    }
    
    .nav-link:hover::before,
    .nav-link.active::before {
      transform: scaleY(1);
    }
    
    .nav-link:hover {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.1) 100%);
      padding-left: 2rem;
    }
    
    body.dark-mode .nav-link:hover {
      background: linear-gradient(90deg, rgba(0, 245, 255, 0.15) 0%, rgba(102, 126, 234, 0.1) 100%);
    }
    
    .nav-link.active {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.2) 0%, rgba(118, 75, 162, 0.15) 100%);
      font-weight: 600;
    }
    
    body.dark-mode .nav-link.active {
      background: linear-gradient(90deg, rgba(0, 245, 255, 0.2) 0%, rgba(102, 126, 234, 0.15) 100%);
    }
    
    .nav-icon {
      font-size: 1.3rem;
      transition: all 0.3s ease;
    }
    
    .nav-link:hover .nav-icon {
      filter: drop-shadow(var(--glow-blue));
      transform: scale(1.2);
    }
    
    body.dark-mode .nav-link:hover .nav-icon {
      filter: drop-shadow(var(--neon-glow));
    }
    
    .main-content {
      flex: 1;
      padding: 2rem;
      animation: fadeInUp 0.8s ease;
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .content-section {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    .content-section.active {
      display: block;
    }
    
    .section-header {
      margin-bottom: 2rem;
    }
    
    .section-title {
      font-size: 2rem;
      font-weight: 600;
      color: var(--text-dark);
      margin-bottom: 0.5rem;
    }
    
    body.dark-mode .section-title {
      color: var(--dark-text);
      text-shadow: var(--neon-glow);
    }
    
    .section-subtitle {
      color: var(--text-light);
      font-size: 1rem;
    }
    
    body.dark-mode .section-subtitle {
      color: var(--dark-text-secondary);
    }
    
    .card {
      background: var(--white);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: var(--shadow-soft);
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
      animation: fadeIn 0.6s ease;
    }
    
    body.dark-mode .card {
      background: var(--dark-surface);
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
      border: 1px solid rgba(102, 126, 234, 0.2);
    }
    
    body.dark-mode .card:hover {
      box-shadow: 0 10px 40px rgba(0, 245, 255, 0.3);
      border: 1px solid rgba(0, 245, 255, 0.3);
    }
    
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;
    }
    
    .service-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto 1rem;
      border-radius: 50%;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-soft);
      transition: all 0.3s ease;
    }
    
    body.dark-mode .service-icon {
      background: linear-gradient(135deg, #00f5ff, #667eea);
      box-shadow: var(--neon-glow);
    }
    
    .card:hover .service-icon {
      transform: scale(1.1) rotate(5deg);
    }
    
    .btn {
      padding: 0.7rem 1.5rem;
      border-radius: 25px;
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      box-shadow: var(--shadow-soft);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
      background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }
    
    .btn-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    body.dark-mode .btn-primary {
      background: linear-gradient(135deg, #00f5ff 0%, #667eea 50%, #764ba2 100%);
      box-shadow: var(--neon-glow);
    }
    
    .btn-secondary {
      background: var(--light-grey);
      color: var(--text-dark);
    }
    
    body.dark-mode .btn-secondary {
      background: var(--dark-bg);
      color: var(--dark-text);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ff6b6b, #ff8787);
      color: white;
    }
    
    .admin-controls {
      display: none;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .admin-controls.visible {
      display: flex;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.6);
      z-index: 200;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
      backdrop-filter: blur(5px);
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: var(--white);
      border-radius: 20px;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      max-height: 90%;
      overflow-y: auto;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
      animation: scaleIn 0.3s ease;
    }
    
    body.dark-mode .modal-content {
      background: var(--dark-surface);
      box-shadow: 0 10px 50px rgba(0, 212, 255, 0.3);
    }
    
    @keyframes scaleIn {
      from {
        transform: scale(0.8);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .modal-header {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--text-dark);
    }
    
    body.dark-mode .modal-header {
      color: var(--dark-text);
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text-dark);
    }
    
    body.dark-mode .form-group label {
      color: var(--dark-text);
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 0.8rem;
      border: 2px solid var(--light-blue);
      border-radius: 10px;
      font-family: inherit;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      background: var(--white);
      color: var(--text-dark);
    }
    
    body.dark-mode .form-group input,
    body.dark-mode .form-group textarea,
    body.dark-mode .form-group select {
      background: var(--dark-bg);
      border-color: var(--neon-blue);
      color: var(--dark-text);
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--accent-blue);
      box-shadow: var(--glow-blue);
    }
    
    body.dark-mode .form-group input:focus,
    body.dark-mode .form-group textarea:focus,
    body.dark-mode .form-group select:focus {
      border-color: var(--neon-blue);
      box-shadow: var(--neon-glow);
    }
    
    .form-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    
    footer {
      background: var(--white);
      padding: 2rem;
      text-align: center;
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
      position: relative;
      overflow: hidden;
      margin-top: auto;
    }
    
    body.dark-mode footer {
      background: var(--dark-surface);
      box-shadow: 0 -4px 20px rgba(0, 212, 255, 0.1);
    }
    
    .footer-glow {
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.3), rgba(118, 75, 162, 0.3), transparent);
      animation: footerGlow 3s infinite;
    }
    
    body.dark-mode .footer-glow {
      background: linear-gradient(90deg, transparent, rgba(0, 245, 255, 0.4), rgba(102, 126, 234, 0.3), transparent);
    }
    
    @keyframes footerGlow {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    .footer-content {
      position: relative;
      z-index: 1;
      color: var(--text-light);
    }
    
    body.dark-mode .footer-content {
      color: var(--dark-text-secondary);
    }
    
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }
    
    .pulse {
      animation: pulse 2s infinite;
    }
    
    @media (max-width: 768px) {
      .header-content {
        padding: 1rem;
      }
      
      .school-info h1 {
        font-size: 1rem;
      }
      
      .school-info p {
        font-size: 0.75rem;
      }
      
      .datetime-display {
        display: none;
      }
      
      .sidebar {
        position: fixed;
        left: -260px;
        top: 0;
        height: 100%;
        z-index: 150;
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .sidebar-toggle {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .main-content {
        padding: 1rem;
      }
      
      .section-title {
        font-size: 1.5rem;
      }
      
      .card-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid var(--light-blue);
      border-top-color: var(--accent-blue);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    body.dark-mode .loading {
      border-color: var(--dark-surface);
      border-top-color: var(--neon-blue);
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .status-message {
      padding: 1rem;
      border-radius: 10px;
      margin: 1rem 0;
      font-size: 0.9rem;
    }
    
    .status-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .status-error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    body.dark-mode .status-success {
      background: rgba(40, 167, 69, 0.2);
      color: #7dffb3;
      border-color: rgba(40, 167, 69, 0.4);
    }
    
    body.dark-mode .status-error {
      background: rgba(220, 53, 69, 0.2);
      color: #ff8a9b;
      border-color: rgba(220, 53, 69, 0.4);
    }
    
    .content-image {
      width: 100%;
      max-width: 400px;
      height: 250px;
      object-fit: cover;
      border-radius: 12px;
      margin: 1rem 0;
      box-shadow: var(--shadow-soft);
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="bg-animation light"></div>
  <div class="app-container">
   <header>
    <div class="header-content">
     <div class="logo-section">
      <div class="logo-circle"><img src="https://i.imgur.com/4EGUuTx.png" alt="Logo PPD Kota Marudu" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"> <span class="logo-emoji" style="display: none;">üè´</span>
      </div>
      <div class="school-info">
       <h1 id="school-name">Portal Rasmi Sektor Pengurusan Sekolah</h1>
       <p id="school-tagline">Pejabat Pendidikan Daerah Kota Marudu</p>
      </div>
     </div>
     <div class="header-actions">
      <div class="datetime-display">
       <div id="current-date"></div>
       <div id="current-time"></div>
      </div><button type="button" class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode"> <span id="theme-icon">‚òÄÔ∏è</span> </button> <button type="button" class="btn-login" id="btn-login">Login Admin</button> <button type="button" class="btn-login" id="btn-logout" style="display: none;">Log Keluar</button>
     </div>
    </div>
   </header>
   <div class="main-layout">
    <aside class="sidebar" id="sidebar">
     <nav>
      <ul class="nav-menu">
       <li class="nav-item"><a href="#" class="nav-link active" data-section="home"> <span class="nav-icon">üè†</span> <span class="nav-text">Laman Utama</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="profil"> <span class="nav-icon">üìã</span> <span class="nav-text">Profil Sektor</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="perkhidmatan"> <span class="nav-icon">‚öôÔ∏è</span> <span class="nav-text">Perkhidmatan</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="dokumen"> <span class="nav-icon">üìÑ</span> <span class="nav-text">Dokumen &amp; Borang</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="pegawai"> <span class="nav-icon">üë•</span> <span class="nav-text">Pegawai</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="berita"> <span class="nav-icon">üì∞</span> <span class="nav-text">Berita &amp; Aktiviti</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="buku-pelawat"> <span class="nav-icon">üìö</span> <span class="nav-text">Buku Pelawat</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="perkongsian"> <span class="nav-icon">üîó</span> <span class="nav-text">Perkongsian</span> </a></li>
       <li class="nav-item"><a href="#" class="nav-link" data-section="statistik"> <span class="nav-icon">üìä</span> <span class="nav-text">Statistik</span> </a></li>
      </ul>
     </nav>
    </aside><button type="button" class="sidebar-toggle" id="sidebar-toggle">‚ò∞</button>
    <main class="main-content">
     <section class="content-section active" id="section-home">
      <div class="section-header">
       <h2 class="section-title">Selamat Datang</h2>
       <p class="section-subtitle">Portal Rasmi Sektor Pengurusan Sekolah Pejabat Pendidikan Daerah Kota Marudu</p>
      </div>
      <div class="card-grid">
       <div class="card">
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">üìö Visi</h3>
        <p>Pendidikan Berkualiti, Insan Terdidik, Negara Sejahtera.</p>
       </div>
       <div class="card">
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">üéØ Misi</h3>
        <p>Melestarikan sistem pendidikan yang berkualiti untuk membangunkan potensi individu bagi memenuhi aspirasi negara.</p>
       </div>
       <div class="card">
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">üéØ Fokus Utama &amp; Fungsi</h3>
        <p style="line-height: 1.8;"><strong>‚Ä¢ Pengurusan Sekolah:</strong> Menyelia pengurusan harian, program, dan operasi sekolah kerajaan dan swasta.<br><br><strong>‚Ä¢ Pengurusan Hal Ehwal Murid (HEM):</strong> Mengurus pendaftaran, pertukaran murid, dan hal ehwal murid secara menyeluruh.<br><br><strong>‚Ä¢ Pengurusan Guru:</strong> Mengurus penempatan dan pertukaran guru serta kakitangan.<br><br><strong>‚Ä¢ Bimbingan &amp; Sokongan:</strong> Merancang dan menyelaras bimbingan serta sokongan kepada kepimpinan sekolah.<br><br><strong>‚Ä¢ Pematuhan &amp; Pemantauan:</strong> Memantau data murid dan pematuhan kurikulum di peringkat sekolah.</p>
       </div>
      </div>
      <div class="card" style="margin-top: 2rem;">
       <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">üìä Statistik Ringkas</h3>
       <div class="card-grid">
        <div style="text-align: center; padding: 1rem;">
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);">
          45
         </div>
         <div style="color: var(--text-light);">
          Jumlah Sekolah
         </div>
        </div>
        <div style="text-align: center; padding: 1rem;">
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);">
          12,500+
         </div>
         <div style="color: var(--text-light);">
          Jumlah Murid
         </div>
        </div>
        <div style="text-align: center; padding: 1rem;">
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);">
          850+
         </div>
         <div style="color: var(--text-light);">
          Jumlah Guru
         </div>
        </div>
        <div style="text-align: center; padding: 1rem;">
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);">
          4
         </div>
         <div style="color: var(--text-light);">
          Unit Pengurusan
         </div>
        </div>
       </div>
      </div>
     </section>
     <section class="content-section" id="section-profil">
      <div class="section-header">
       <h2 class="section-title">Profil Sektor</h2>
       <p class="section-subtitle">Maklumat lengkap tentang Sektor Pengurusan Sekolah</p>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">Latar Belakang</h3>
       <p style="line-height: 1.8;">Sektor Pengurusan Sekolah (SPS) di Pejabat Pendidikan Daerah (PPD) adalah unit penting yang bertanggungjawab mengurus tadbir, operasi, dan pentadbiran keseluruhan sekolah di peringkat daerah, termasuk sekolah kerajaan, bantuan kerajaan dan swasta, merangkumi pengurusan guru, murid, data sekolah, penempatan, pertukaran, serta menyelia pematuhan kurikulum dan hal ehwal pentadbiran am untuk memastikan sekolah beroperasi secara cekap dan efektif selaras dengan dasar Kementerian Pendidikan Malaysia.</p>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1rem; color: var(--accent-blue);">Carta Organisasi</h3>
       <div style="padding: 2rem;">
        <div style="text-align: center; margin-bottom: 3rem;">
         <div style="display: inline-block; width: 280px; padding: 1.2rem 1rem; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; font-weight: 700; color: white; box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); font-size: 1rem; position: relative;">
          üë®‚Äçüíº Pegawai Pendidikan Daerah 
          <div style="position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); width: 3px; height: 20px; background: linear-gradient(to bottom, #764ba2, #667eea);"></div>
         </div>
        </div>
        <div style="text-align: center; margin-bottom: 3rem;">
         <div style="display: inline-block; width: 280px; padding: 1.2rem 1rem; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; font-weight: 700; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3); font-size: 1rem; position: relative;">
          üë• Timbalan Sektor Pengurusan Sekolah 
          <div style="position: absolute; bottom: -30px; left: 50%; transform: translateX(-50%); width: 3px; height: 30px; background: linear-gradient(to bottom, #764ba2, #667eea);"></div>
         </div>
        </div>
        <div style="position: relative; height: 30px; margin-bottom: 2rem;">
         <div style="position: absolute; top: 0; left: 35%; right: 35%; height: 3px; background: #667eea;"></div>
         <div style="position: absolute; top: 0; left: 35%; width: 3px; height: 30px; background: #667eea;"></div>
         <div style="position: absolute; top: 0; right: 35%; width: 3px; height: 30px; background: #667eea;"></div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 900px; margin: 0 auto 3rem;">
         <div style="text-align: center;">
          <div style="width: 100%; padding: 1.2rem 1rem; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; font-weight: 700; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.25); font-size: 1rem; position: relative; min-height: 70px; display: flex; align-items: center; justify-content: center;">
           ‚≠ê SIP+
          </div>
         </div>
         <div style="text-align: center;">
          <div style="width: 100%; padding: 1.2rem 1rem; background: linear-gradient(135deg, #667eea, #764ba2); border-radius: 15px; font-weight: 700; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.25); font-size: 1rem; position: relative; min-height: 70px; display: flex; align-items: center; justify-content: center;">
           üè¢ Unit Sektor Pengurusan Sekolah 
           <div style="position: absolute; bottom: -30px; left: 50%; transform: translateX(-50%); width: 3px; height: 30px; background: linear-gradient(to bottom, #667eea, transparent);"></div>
          </div>
         </div>
        </div>
        <div style="position: relative; height: 30px; margin-bottom: 2rem;">
         <div style="position: absolute; top: 0; left: 10%; right: 10%; height: 3px; background: linear-gradient(to right, transparent, #667eea 20%, #667eea 80%, transparent);"></div>
         <div style="position: absolute; top: 0; left: 20%; width: 3px; height: 30px; background: #667eea;"></div>
         <div style="position: absolute; top: 0; left: 35%; width: 3px; height: 30px; background: #667eea;"></div>
         <div style="position: absolute; top: 0; right: 35%; width: 3px; height: 30px; background: #667eea;"></div>
         <div style="position: absolute; top: 0; right: 20%; width: 3px; height: 30px; background: #667eea;"></div>
        </div>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; max-width: 1200px; margin: 0 auto;">
         <div style="text-align: center;">
          <div style="width: 100%; min-height: 100px; padding: 1rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border: 2px solid var(--light-blue); border-radius: 12px; font-weight: 500; color: var(--text-dark); transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.1); display: flex; flex-direction: column; align-items: center; justify-content: center;">
           <div style="font-size: 2rem; margin-bottom: 0.5rem;">
            üë∂
           </div>
           <div>
            Unit Prasekolah
           </div>
          </div>
         </div>
         <div style="text-align: center;">
          <div style="width: 100%; min-height: 100px; padding: 1rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border: 2px solid var(--light-blue); border-radius: 12px; font-weight: 500; color: var(--text-dark); transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.1); display: flex; flex-direction: column; align-items: center; justify-content: center;">
           <div style="font-size: 2rem; margin-bottom: 0.5rem;">
            üìö
           </div>
           <div>
            Unit Rendah
           </div>
          </div>
         </div>
         <div style="text-align: center;">
          <div style="width: 100%; min-height: 100px; padding: 1rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border: 2px solid var(--light-blue); border-radius: 12px; font-weight: 500; color: var(--text-dark); transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.1); display: flex; flex-direction: column; align-items: center; justify-content: center;">
           <div style="font-size: 2rem; margin-bottom: 0.5rem;">
            üéì
           </div>
           <div>
            Unit Menengah &amp; Tingkatan Enam
           </div>
          </div>
         </div>
         <div style="text-align: center;">
          <div style="width: 100%; min-height: 100px; padding: 1rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border: 2px solid var(--light-blue); border-radius: 12px; font-weight: 500; color: var(--text-dark); transition: all 0.3s ease; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.1); display: flex; flex-direction: column; align-items: center; justify-content: center;">
           <div style="font-size: 2rem; margin-bottom: 0.5rem;">
            üè´
           </div>
           <div>
            Unit Swasta
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
     </section>
     <section class="content-section" id="section-perkhidmatan">
      <div class="section-header">
       <h2 class="section-title">Perkhidmatan</h2>
       <p class="section-subtitle">Perkhidmatan yang disediakan kepada sekolah</p>
      </div>
      <div class="card-grid">
       <div class="card">
        <div class="service-icon">
         <svg width="40" height="40" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <circle cx="9" cy="7" r="4" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M23 21V19C22.9993 18.1137 22.7044 17.2528 22.1614 16.5523C21.6184 15.8519 20.8581 15.3516 20 15.13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M16 3.13C16.8604 3.35031 17.623 3.85071 18.1676 4.55232C18.7122 5.25392 19.0078 6.11683 19.0078 7.005C19.0078 7.89318 18.7122 8.75608 18.1676 9.45769C17.623 10.1593 16.8604 10.6597 16 10.88" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
         </svg>
        </div>
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue); text-align: center;">Penempatan &amp; Pertukaran Guru</h3>
        <p style="text-align: center;">Mengurus proses penempatan dan pertukaran guru di peringkat daerah.</p>
       </div>
       <div class="card">
        <div class="service-icon">
         <svg width="40" height="40" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M16 21V5C16 4.46957 15.7893 3.96086 15.4142 3.58579C15.0391 3.21071 14.5304 3 14 3H10C9.46957 3 8.96086 3.21071 8.58579 3.58579C8.21071 3.96086 8 4.46957 8 5V21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M3 10H8M16 10H21M3 6H8M16 6H21M3 14H8M16 14H21M3 18H8M16 18H21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <circle cx="12" cy="12" r="2" stroke="white" stroke-width="2" />
         </svg>
        </div>
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue); text-align: center;">Pendaftaran Murid</h3>
        <p style="text-align: center;">Mengurus pendaftaran murid warganegara dan bukan warganegara.</p>
       </div>
       <div class="card">
        <div class="service-icon">
         <svg width="40" height="40" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V9L13 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M13 2V9H20" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M8 13H16M8 17H16" stroke="white" stroke-width="2" stroke-linecap="round" />
         </svg>
        </div>
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue); text-align: center;">Data &amp; Laporan</h3>
        <p style="text-align: center;">Mengumpul dan mengesahkan data sekolah serta menyediakan laporan.</p>
       </div>
       <div class="card">
        <div class="service-icon">
         <svg width="40" height="40" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M2 17L12 22L22 17" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M2 12L12 17L22 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
         </svg>
        </div>
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue); text-align: center;">Bimbingan &amp; Sokongan</h3>
        <p style="text-align: center;">Memberi sokongan kepada kepemimpinan sekolah.</p>
       </div>
       <div class="card">
        <div class="service-icon">
         <svg width="40" height="40" viewbox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /> <path d="M12 6V12L16 14" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
         </svg>
        </div>
        <h3 style="margin-bottom: 1rem; color: var(--accent-blue); text-align: center;">Pengurusan Kewangan (Prasekolah)</h3>
        <p style="text-align: center;">Menyedia dan mengurus bajet serta ABM.</p>
       </div>
      </div>
     </section>
     <section class="content-section" id="section-dokumen">
      <div class="section-header">
       <h2 class="section-title">Dokumen &amp; Borang</h2>
       <p class="section-subtitle">Muat turun borang dan dokumen rasmi</p>
       <div class="admin-controls" id="admin-dokumen"><button type="button" class="btn btn-primary" id="btn-add-dokumen">+ Tambah</button>
       </div>
      </div>
      <div id="dokumen-list"></div>
     </section>
     <section class="content-section" id="section-pegawai">
      <div class="section-header">
       <h2 class="section-title">Pegawai</h2>
       <p class="section-subtitle">Senarai pegawai Sektor Pengurusan Sekolah</p>
       <div class="admin-controls" id="admin-pegawai"><button type="button" class="btn btn-primary" id="btn-add-pegawai">+ Tambah</button>
       </div>
      </div>
      <div id="pegawai-list" class="card-grid"></div>
     </section>
     <section class="content-section" id="section-berita">
      <div class="section-header">
       <h2 class="section-title">Berita &amp; Aktiviti</h2>
       <p class="section-subtitle">Perkembangan terkini dan aktiviti sektor</p>
       <div class="admin-controls" id="admin-berita"><button type="button" class="btn btn-primary" id="btn-add-berita">+ Tambah</button>
       </div>
      </div>
      <div id="berita-list" class="card-grid"></div>
     </section>
     <section class="content-section" id="section-perkongsian">
      <div class="section-header">
       <h2 class="section-title">Perkongsian</h2>
       <p class="section-subtitle">Pautan dan sumber berguna</p>
       <div class="admin-controls" id="admin-perkongsian"><button type="button" class="btn btn-primary" id="btn-add-perkongsian">+ Tambah</button>
       </div>
      </div>
      <div id="perkongsian-list" class="card-grid"></div>
     </section>
     <section class="content-section" id="section-statistik">
      <div class="section-header">
       <h2 class="section-title">Statistik Interaksi</h2>
       <p class="section-subtitle">Ringkasan data suka, lihat, dan komen untuk semua kandungan</p>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1.5rem; color: var(--accent-blue); text-align: center;">üìä Ringkasan Keseluruhan</h3>
       <div class="card-grid">
        <div style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-radius: 12px;">
         <div style="font-size: 3rem; margin-bottom: 0.5rem;">
          ‚ù§Ô∏è
         </div>
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);" id="total-likes">
          0
         </div>
         <div style="color: var(--text-light); font-weight: 500;">
          Jumlah Suka
         </div>
        </div>
        <div style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-radius: 12px;">
         <div style="font-size: 3rem; margin-bottom: 0.5rem;">
          üëÄ
         </div>
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);" id="total-views">
          0
         </div>
         <div style="color: var(--text-light); font-weight: 500;">
          Jumlah Lihat
         </div>
        </div>
        <div style="text-align: center; padding: 1.5rem; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-radius: 12px;">
         <div style="font-size: 3rem; margin-bottom: 0.5rem;">
          üí¨
         </div>
         <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue);" id="total-comments">
          0
         </div>
         <div style="color: var(--text-light); font-weight: 500;">
          Jumlah Komen
         </div>
        </div>
       </div>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üìÑ Statistik Dokumen &amp; Borang</h3>
       <div id="statistik-dokumen"></div>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üì∞ Statistik Berita &amp; Aktiviti</h3>
       <div id="statistik-berita"></div>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üìö Statistik Buku Pelawat</h3>
       <div id="statistik-buku-pelawat"></div>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1.5rem; color: var(--accent-blue);">üîó Statistik Perkongsian</h3>
       <div id="statistik-perkongsian"></div>
      </div>
     </section>
     <section class="content-section" id="section-buku-pelawat">
      <div class="section-header">
       <h2 class="section-title">Buku Pelawat</h2>
       <p class="section-subtitle">Tinggalkan komen dan maklum balas anda</p>
      </div>
      <div class="card">
       <h3 style="margin-bottom: 1rem;">Tulis Komen</h3>
       <form id="form-buku-pelawat">
        <div class="form-group"><label for="visitor-name">Nama</label> <input type="text" id="visitor-name" required>
        </div>
        <div class="form-group"><label for="visitor-email">E-mel (pilihan)</label> <input type="email" id="visitor-email">
        </div>
        <div class="form-group"><label for="visitor-message">Komen</label> <textarea id="visitor-message" rows="4" required></textarea>
        </div><button type="submit" class="btn btn-primary" id="btn-submit-visitor">Hantar Komen</button>
       </form>
      </div>
      <div style="margin-top: 2rem;">
       <h3 style="margin-bottom: 1rem;">Komen Terkini</h3>
       <div id="visitor-comments"></div>
      </div>
     </section>
    </main>
   </div>
   <footer>
    <div class="footer-glow"></div>
    <div class="footer-content">
     <p id="copyright-text">¬© 2025 Sektor Pengurusan Sekolah, Pejabat Pendidikan Daerah Kota Marudu.</p>
     <p style="font-size: 0.85rem; margin-top: 0.5rem; opacity: 0.7;">Portal Rasmi Sektor Pengurusan Sekolah PPD Kota Marudu</p>
    </div>
   </footer>
  </div><!-- Modals -->
  <div class="modal" id="modal-login">
   <div class="modal-content">
    <h2 class="modal-header">Login Admin</h2>
    <form id="form-login">
     <div class="form-group"><label for="login-username">Nama Pengguna</label> <input type="text" id="login-username" required>
     </div>
     <div class="form-group"><label for="login-password">Kata Laluan</label> <input type="password" id="login-password" required>
     </div>
     <div id="login-status"></div>
     <div class="form-actions"><button type="button" class="btn btn-secondary" id="btn-cancel-login">Batal</button> <button type="submit" class="btn btn-primary">Log Masuk</button>
     </div>
    </form>
   </div>
  </div>
  <div class="modal" id="modal-change-password">
   <div class="modal-content">
    <h2 class="modal-header">Tukar Kata Laluan</h2>
    <form id="form-change-password">
     <div class="form-group"><label for="current-password">Kata Laluan Semasa</label> <input type="password" id="current-password" required>
     </div>
     <div class="form-group"><label for="new-password">Kata Laluan Baru</label> <input type="password" id="new-password" required>
     </div>
     <div class="form-group"><label for="confirm-password">Sahkan Kata Laluan Baru</label> <input type="password" id="confirm-password" required>
     </div>
     <div id="password-status"></div>
     <div class="form-actions"><button type="button" class="btn btn-secondary" id="btn-cancel-password">Batal</button> <button type="submit" class="btn btn-primary">Tukar</button>
     </div>
    </form>
   </div>
  </div>
  <div class="modal" id="modal-form">
   <div class="modal-content">
    <h2 class="modal-header" id="modal-title">Tambah Item</h2>
    <form id="modal-form-content">
     <div id="form-fields"></div>
     <div class="form-actions"><button type="button" class="btn btn-secondary" id="btn-cancel-form">Batal</button> <button type="submit" class="btn btn-primary" id="btn-save-form">Simpan</button>
     </div>
    </form>
   </div>
  </div>
  <script>
    // Global state
    let allData = [];
    let currentUser = null;
    let editingItem = null;
    let isDataLoaded = false;
    
    const users = {
      admin: { password: 'adminsek', role: 'admin' },
      superadmin: { password: 'akuadmin', role: 'superadmin' }
    };
    
    // Element SDK Configuration
    const defaultConfig = {
      primary_color: '#667eea',
      surface_color: '#ffffff',
      text_color: '#1a202c',
      accent_color: '#764ba2',
      secondary_color: '#f7fafc',
      font_family: 'Poppins',
      font_size: 14,
      
      school_name: 'Portal Rasmi Sektor Pengurusan Sekolah',
      school_tagline: 'Pejabat Pendidikan Daerah Kota Marudu',
      header_image_url: '',
      copyright_text: '¬© 2025 Sektor Pengurusan Sekolah, Pejabat Pendidikan Daerah Kota Marudu.'
    };
    
    async function onConfigChange(config) {
      const cfg = { ...defaultConfig, ...config };
      
      const schoolName = document.getElementById('school-name');
      const schoolTagline = document.getElementById('school-tagline');
      const copyrightText = document.getElementById('copyright-text');
      
      if (schoolName) schoolName.textContent = cfg.school_name;
      if (schoolTagline) schoolTagline.textContent = cfg.school_tagline;
      if (copyrightText) copyrightText.textContent = cfg.copyright_text;
      
      const logoCircle = document.querySelector('.logo-circle');
      if (logoCircle) {
        if (cfg.header_image_url && cfg.header_image_url.trim() !== '') {
          logoCircle.innerHTML = `<img src="${cfg.header_image_url}" alt="Logo" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"><span class="logo-emoji" style="display: none;">üè´</span>`;
        } else {
          logoCircle.innerHTML = '<img src="https://i.imgur.com/4EGUuTx.png" alt="Logo PPD Kota Marudu" onerror="this.style.display=\'none\'; this.nextElementSibling.style.display=\'flex\';"><span class="logo-emoji" style="display: none;">üè´</span>';
        }
      }
      
      document.documentElement.style.setProperty('--light-blue', cfg.primary_color);
      document.documentElement.style.setProperty('--white', cfg.surface_color);
      document.documentElement.style.setProperty('--text-dark', cfg.text_color);
      document.documentElement.style.setProperty('--accent-blue', cfg.accent_color);
      document.documentElement.style.setProperty('--light-grey', cfg.secondary_color);
      
      document.body.style.fontFamily = `${cfg.font_family}, Inter, sans-serif`;
      document.body.style.fontSize = `${cfg.font_size}px`;
    }
    
    function mapToCapabilities(config) {
      const cfg = { ...defaultConfig, ...config };
      return {
        recolorables: [
          {
            get: () => cfg.primary_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ primary_color: value });
              }
            }
          },
          {
            get: () => cfg.surface_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ surface_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          },
          {
            get: () => cfg.accent_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          },
          {
            get: () => cfg.secondary_color,
            set: (value) => {
              if (window.elementSdk) {
                window.elementSdk.setConfig({ secondary_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => cfg.font_family,
          set: (value) => {
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        },
        fontSizeable: {
          get: () => cfg.font_size,
          set: (value) => {
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }
      };
    }
    
    function mapToEditPanelValues(config) {
      const cfg = { ...defaultConfig, ...config };
      return new Map([
        ['school_name', cfg.school_name],
        ['school_tagline', cfg.school_tagline],
        ['header_image_url', cfg.header_image_url],
        ['copyright_text', cfg.copyright_text]
      ]);
    }
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    } else {
      onConfigChange(defaultConfig);
    }
    
    // Data SDK Handler
    const dataHandler = {
      onDataChanged(data) {
        allData = data;
        isDataLoaded = true;
        renderAllContent();
      }
    };
    
    // Initialize Data SDK
    async function initDataSDK() {
      if (window.dataSdk) {
        const result = await window.dataSdk.init(dataHandler);
        if (!result.isOk) {
          console.error('Failed to initialize Data SDK');
        }
      }
    }
    
    initDataSDK();
    
    // Helper functions
    function getDataByType(type) {
      return allData.filter(item => item.data_type === type);
    }
    
    async function createData(type, data) {
      const btn = document.getElementById('btn-save-form');
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<span class="loading"></span> Menyimpan...';
      }
      
      const record = {
        data_type: type,
        ...data,
        created_at: new Date().toISOString()
      };
      
      if (window.dataSdk) {
        const result = await window.dataSdk.create(record);
        
        if (btn) {
          btn.disabled = false;
          btn.textContent = 'Simpan';
        }
        
        if (result.isOk) {
          return true;
        } else {
          showInlineError('Gagal menyimpan data. Sila cuba lagi.');
          return false;
        }
      }
      
      if (btn) {
        btn.disabled = false;
        btn.textContent = 'Simpan';
      }
      
      return false;
    }
    
    async function updateData(item, updates) {
      const btn = document.getElementById('btn-save-form');
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<span class="loading"></span> Mengemaskini...';
      }
      
      const updatedItem = { ...item, ...updates };
      
      if (window.dataSdk) {
        const result = await window.dataSdk.update(updatedItem);
        
        if (btn) {
          btn.disabled = false;
          btn.textContent = 'Simpan';
        }
        
        if (result.isOk) {
          return true;
        } else {
          showInlineError('Gagal mengemaskini data. Sila cuba lagi.');
          return false;
        }
      }
      
      if (btn) {
        btn.disabled = false;
        btn.textContent = 'Simpan';
      }
      
      return false;
    }
    
    async function deleteData(item) {
      if (window.dataSdk) {
        const result = await window.dataSdk.delete(item);
        if (!result.isOk) {
          showInlineError('Gagal memadam data. Sila cuba lagi.');
        }
      }
    }
    
    function showInlineError(message) {
      const formFields = document.getElementById('form-fields');
      if (formFields) {
        const errorDiv = document.createElement('div');
        errorDiv.className = 'status-message status-error';
        errorDiv.textContent = message;
        formFields.insertBefore(errorDiv, formFields.firstChild);
        setTimeout(() => errorDiv.remove(), 3000);
      }
    }
    
    // Date and time
    function updateDateTime() {
      const now = new Date();
      const dateEl = document.getElementById('current-date');
      const timeEl = document.getElementById('current-time');
      
      if (dateEl) {
        dateEl.textContent = now.toLocaleDateString('ms-MY', { 
          day: 'numeric', 
          month: 'short', 
          year: 'numeric' 
        });
      }
      
      if (timeEl) {
        timeEl.textContent = now.toLocaleTimeString('ms-MY', { 
          hour: '2-digit', 
          minute: '2-digit' 
        });
      }
    }
    
    setInterval(updateDateTime, 1000);
    updateDateTime();
    
    // Theme toggle
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    const bgAnimation = document.querySelector('.bg-animation');
    
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      
      themeIcon.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
      bgAnimation.className = isDark ? 'bg-animation dark' : 'bg-animation light';
    });
    
    // Navigation
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.content-section');
    
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const sectionId = link.dataset.section;
        
        navLinks.forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        
        sections.forEach(s => s.classList.remove('active'));
        const targetSection = document.getElementById(`section-${sectionId}`);
        if (targetSection) {
          targetSection.classList.add('active');
        }
      });
    });
    
    // Sidebar toggle
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const sidebar = document.getElementById('sidebar');
    
    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });
    
    // Login
    const btnLogin = document.getElementById('btn-login');
    const btnLogout = document.getElementById('btn-logout');
    const modalLogin = document.getElementById('modal-login');
    const formLogin = document.getElementById('form-login');
    const btnCancelLogin = document.getElementById('btn-cancel-login');
    const loginStatus = document.getElementById('login-status');
    
    btnLogin.addEventListener('click', () => {
      modalLogin.classList.add('active');
      formLogin.reset();
      loginStatus.innerHTML = '';
    });
    
    btnCancelLogin.addEventListener('click', () => {
      modalLogin.classList.remove('active');
    });
    
    formLogin.addEventListener('submit', (e) => {
      e.preventDefault();
      
      const username = document.getElementById('login-username').value;
      const password = document.getElementById('login-password').value;
      
      if (users[username] && users[username].password === password) {
        currentUser = { username, role: users[username].role };
        modalLogin.classList.remove('active');
        updateUIForUser();
        showStatus(loginStatus, 'Log masuk berjaya!', 'success');
      } else {
        showStatus(loginStatus, 'Nama pengguna atau kata laluan salah.', 'error');
      }
    });
    
    btnLogout.addEventListener('click', () => {
      currentUser = null;
      updateUIForUser();
    });
    
    function updateUIForUser() {
      if (currentUser) {
        btnLogin.style.display = 'none';
        btnLogout.style.display = 'block';
        btnLogout.textContent = `Log Keluar (${currentUser.username})`;
        
        document.querySelectorAll('.admin-controls').forEach(el => {
          el.classList.add('visible');
        });
        
        if (!document.getElementById('btn-change-password')) {
          const changePasswordBtn = document.createElement('button');
          changePasswordBtn.type = 'button';
          changePasswordBtn.className = 'btn btn-secondary';
          changePasswordBtn.id = 'btn-change-password';
          changePasswordBtn.textContent = 'Tukar Kata Laluan';
          changePasswordBtn.addEventListener('click', openChangePasswordModal);
          btnLogout.parentElement.insertBefore(changePasswordBtn, btnLogout);
        }
      } else {
        btnLogin.style.display = 'block';
        btnLogout.style.display = 'none';
        
        document.querySelectorAll('.admin-controls').forEach(el => {
          el.classList.remove('visible');
        });
        
        const changePasswordBtn = document.getElementById('btn-change-password');
        if (changePasswordBtn) {
          changePasswordBtn.remove();
        }
      }
      
      renderAllContent();
    }
    
    // Change password
    const modalChangePassword = document.getElementById('modal-change-password');
    const formChangePassword = document.getElementById('form-change-password');
    const btnCancelPassword = document.getElementById('btn-cancel-password');
    const passwordStatus = document.getElementById('password-status');
    
    function openChangePasswordModal() {
      modalChangePassword.classList.add('active');
      formChangePassword.reset();
      passwordStatus.innerHTML = '';
    }
    
    btnCancelPassword.addEventListener('click', () => {
      modalChangePassword.classList.remove('active');
    });
    
    formChangePassword.addEventListener('submit', (e) => {
      e.preventDefault();
      
      if (!currentUser) return;
      
      const currentPassword = document.getElementById('current-password').value;
      const newPassword = document.getElementById('new-password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      
      if (users[currentUser.username].password !== currentPassword) {
        showStatus(passwordStatus, 'Kata laluan semasa salah.', 'error');
        return;
      }
      
      if (newPassword !== confirmPassword) {
        showStatus(passwordStatus, 'Kata laluan baru tidak sepadan.', 'error');
        return;
      }
      
      if (newPassword.length < 6) {
        showStatus(passwordStatus, 'Kata laluan baru mestilah sekurang-kurangnya 6 aksara.', 'error');
        return;
      }
      
      users[currentUser.username].password = newPassword;
      showStatus(passwordStatus, 'Kata laluan berjaya ditukar!', 'success');
      
      setTimeout(() => {
        modalChangePassword.classList.remove('active');
      }, 1500);
    });
    
    // Modal form
    const modalForm = document.getElementById('modal-form');
    const modalTitle = document.getElementById('modal-title');
    const modalFormContent = document.getElementById('modal-form-content');
    const formFields = document.getElementById('form-fields');
    const btnCancelForm = document.getElementById('btn-cancel-form');
    
    document.getElementById('btn-add-dokumen')?.addEventListener('click', () => {
      openModal('dokumen');
    });
    
    document.getElementById('btn-add-pegawai')?.addEventListener('click', () => {
      openModal('pegawai');
    });
    
    document.getElementById('btn-add-berita')?.addEventListener('click', () => {
      openModal('berita');
    });
    
    document.getElementById('btn-add-perkongsian')?.addEventListener('click', () => {
      openModal('perkongsian');
    });
    
    btnCancelForm.addEventListener('click', () => {
      modalForm.classList.remove('active');
      editingItem = null;
    });
    
    function openModal(type, item = null) {
      editingItem = item;
      
      modalTitle.textContent = editingItem ? `Edit ${type.charAt(0).toUpperCase() + type.slice(1)}` : `Tambah ${type.charAt(0).toUpperCase() + type.slice(1)}`;
      
      let fields = '';
      
      if (type === 'dokumen') {
        fields = `
          <div class="form-group">
            <label for="form-title">Tajuk Dokumen</label>
            <input type="text" id="form-title" value="${editingItem ? editingItem.title : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-description">Penerangan</label>
            <textarea id="form-description" rows="3" required>${editingItem ? editingItem.description : ''}</textarea>
          </div>
          <div class="form-group">
            <label for="form-pdf-url">URL PDF</label>
            <input type="url" id="form-pdf-url" value="${editingItem ? editingItem.pdf_url : ''}" required>
          </div>
        `;
      } else if (type === 'pegawai') {
        fields = `
          <div class="form-group">
            <label for="form-name">Nama Pegawai</label>
            <input type="text" id="form-name" value="${editingItem ? editingItem.name : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-position">Jawatan</label>
            <input type="text" id="form-position" value="${editingItem ? editingItem.position : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-unit">Unit</label>
            <select id="form-unit" required>
              <option value="">Pilih Unit</option>
              <option value="Sektor Pengurusan Sekolah" ${editingItem && editingItem.unit === 'Sektor Pengurusan Sekolah' ? 'selected' : ''}>Sektor Pengurusan Sekolah</option>
              <option value="Unit Prasekolah" ${editingItem && editingItem.unit === 'Unit Prasekolah' ? 'selected' : ''}>Unit Prasekolah</option>
              <option value="Unit Rendah" ${editingItem && editingItem.unit === 'Unit Rendah' ? 'selected' : ''}>Unit Rendah</option>
              <option value="Unit Menengah & Tingkatan Enam" ${editingItem && editingItem.unit === 'Unit Menengah & Tingkatan Enam' ? 'selected' : ''}>Unit Menengah & Tingkatan Enam</option>
              <option value="Unit Swasta" ${editingItem && editingItem.unit === 'Unit Swasta' ? 'selected' : ''}>Unit Swasta</option>
            </select>
          </div>
          <div class="form-group">
            <label for="form-email">E-mel</label>
            <input type="email" id="form-email" value="${editingItem ? editingItem.email : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-photo-url">URL Gambar Pegawai (pilihan)</label>
            <input type="url" id="form-photo-url" value="${editingItem ? editingItem.photo_url || '' : ''}">
          </div>
        `;
      } else if (type === 'berita') {
        fields = `
          <div class="form-group">
            <label for="form-title">Tajuk Berita</label>
            <input type="text" id="form-title" value="${editingItem ? editingItem.title : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-content">Kandungan</label>
            <textarea id="form-content" rows="4" required>${editingItem ? editingItem.content : ''}</textarea>
          </div>
          <div class="form-group">
            <label for="form-author">Disediakan Oleh</label>
            <input type="text" id="form-author" value="${editingItem ? editingItem.author : 'Admin'}">
          </div>
          <div class="form-group">
            <label for="form-image-url">URL Gambar (pilihan)</label>
            <input type="url" id="form-image-url" value="${editingItem ? editingItem.image_url || '' : ''}">
          </div>
        `;
      } else if (type === 'perkongsian') {
        fields = `
          <div class="form-group">
            <label for="form-title">Tajuk Perkongsian</label>
            <input type="text" id="form-title" value="${editingItem ? editingItem.title : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-content">Kandungan</label>
            <textarea id="form-content" rows="3" required>${editingItem ? editingItem.content : ''}</textarea>
          </div>
          <div class="form-group">
            <label for="form-link-url">URL Pautan</label>
            <input type="url" id="form-link-url" value="${editingItem ? editingItem.link_url : ''}" required>
          </div>
          <div class="form-group">
            <label for="form-image-url">URL Gambar (pilihan)</label>
            <input type="url" id="form-image-url" value="${editingItem ? editingItem.image_url || '' : ''}">
          </div>
        `;
      }
      
      formFields.innerHTML = fields;
      modalForm.classList.add('active');
      
      modalFormContent.onsubmit = async (e) => {
        e.preventDefault();
        await saveItem(type);
      };
    }
    
    async function saveItem(type) {
      let success = false;
      
      if (type === 'dokumen') {
        const data = {
          title: document.getElementById('form-title').value,
          description: document.getElementById('form-description').value,
          pdf_url: document.getElementById('form-pdf-url').value,
          date: editingItem ? editingItem.date : new Date().toLocaleDateString('ms-MY', { day: 'numeric', month: 'long', year: 'numeric' }),
          likes: editingItem ? editingItem.likes : 0,
          views: editingItem ? editingItem.views : 0,
          comments: editingItem ? editingItem.comments : []
        };
        
        if (editingItem) {
          success = await updateData(editingItem, data);
        } else {
          success = await createData('dokumen', data);
        }
      } else if (type === 'pegawai') {
        const data = {
          name: document.getElementById('form-name').value,
          position: document.getElementById('form-position').value,
          unit: document.getElementById('form-unit').value,
          email: document.getElementById('form-email').value,
          photo_url: document.getElementById('form-photo-url').value
        };
        
        if (editingItem) {
          success = await updateData(editingItem, data);
        } else {
          success = await createData('pegawai', data);
        }
      } else if (type === 'berita') {
        const data = {
          title: document.getElementById('form-title').value,
          content: document.getElementById('form-content').value,
          author: document.getElementById('form-author').value,
          image_url: document.getElementById('form-image-url').value,
          date: editingItem ? editingItem.date : new Date().toLocaleDateString('ms-MY', { day: 'numeric', month: 'long', year: 'numeric' }),
          likes: editingItem ? editingItem.likes : 0,
          views: editingItem ? editingItem.views : 0,
          comments: editingItem ? editingItem.comments : []
        };
        
        if (editingItem) {
          success = await updateData(editingItem, data);
        } else {
          success = await createData('berita', data);
        }
      } else if (type === 'perkongsian') {
        const data = {
          title: document.getElementById('form-title').value,
          content: document.getElementById('form-content').value,
          link_url: document.getElementById('form-link-url').value,
          image_url: document.getElementById('form-image-url').value,
          date: editingItem ? editingItem.date : new Date().toLocaleDateString('ms-MY', { day: 'numeric', month: 'long', year: 'numeric' }),
          likes: editingItem ? editingItem.likes : 0,
          views: editingItem ? editingItem.views : 0,
          comments: editingItem ? editingItem.comments : []
        };
        
        if (editingItem) {
          success = await updateData(editingItem, data);
        } else {
          success = await createData('perkongsian', data);
        }
      }
      
      if (success) {
        modalForm.classList.remove('active');
        editingItem = null;
      }
    }
    
    function deleteItem(item) {
      const confirmMsg = 'Adakah anda pasti mahu memadam item ini?';
      
      const confirmDiv = document.createElement('div');
      confirmDiv.style.cssText = 'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--white); padding: 2rem; border-radius: 15px; box-shadow: 0 10px 50px rgba(0,0,0,0.3); z-index: 300; text-align: center; min-width: 300px;';
      
      const isDark = document.body.classList.contains('dark-mode');
      if (isDark) {
        confirmDiv.style.background = 'var(--dark-surface)';
        confirmDiv.style.color = 'var(--dark-text)';
      }
      
      confirmDiv.innerHTML = `
        <p style="margin-bottom: 1.5rem; font-size: 1.1rem; color: ${isDark ? 'var(--dark-text)' : 'var(--text-dark)'};">${confirmMsg}</p>
        <div style="display: flex; gap: 1rem; justify-content: center;">
          <button type="button" class="btn btn-secondary confirm-no-btn">Tidak</button>
          <button type="button" class="btn btn-danger confirm-yes-btn">Ya, Padam</button>
        </div>
      `;
      
      const overlay = document.createElement('div');
      overlay.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 299; backdrop-filter: blur(3px);';
      
      document.body.appendChild(overlay);
      document.body.appendChild(confirmDiv);
      
      const noBtn = confirmDiv.querySelector('.confirm-no-btn');
      const yesBtn = confirmDiv.querySelector('.confirm-yes-btn');
      
      function closeConfirm() {
        if (document.body.contains(confirmDiv)) {
          document.body.removeChild(confirmDiv);
        }
        if (document.body.contains(overlay)) {
          document.body.removeChild(overlay);
        }
      }
      
      noBtn.addEventListener('click', closeConfirm);
      overlay.addEventListener('click', closeConfirm);
      
      yesBtn.addEventListener('click', async () => {
        await deleteData(item);
        closeConfirm();
      });
    }
    
    // Render functions
    function renderDokumen() {
      const container = document.getElementById('dokumen-list');
      if (!container) return;
      
      const dokumenData = getDataByType('dokumen');
      
      if (dokumenData.length === 0 && isDataLoaded) {
        container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">Tiada dokumen tersedia.</p></div>';
        return;
      }
      
      container.innerHTML = dokumenData.map(doc => `
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem;">
            <div style="flex: 1;">
              <h3 style="margin-bottom: 0.5rem; color: var(--accent-blue);">üìÑ ${doc.title}</h3>
              <p style="color: var(--text-light); font-size: 0.9rem;">${doc.description}</p>
              <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.5rem;">
                Dimuat naik: ${doc.date}
              </p>
              
              <div style="display: flex; gap: 1rem; margin-top: 1rem; align-items: center;">
                <button type="button" class="btn-like" data-id="${doc.__backendId}" data-type="dokumen" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark); transition: all 0.3s ease;">
                  <span style="font-size: 1.2rem;">‚ù§Ô∏è</span>
                  <span class="like-count">${doc.likes}</span>
                </button>
                <button type="button" class="btn-view" data-id="${doc.__backendId}" data-type="dokumen" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
                  <span style="font-size: 1.2rem;">üëÄ</span>
                  <span class="view-count">${doc.views}</span>
                </button>
                <button type="button" class="btn-comment" data-id="${doc.__backendId}" data-type="dokumen" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
                  <span style="font-size: 1.2rem;">üí¨</span>
                  <span>${doc.comments.length}</span>
                </button>
              </div>
              
              <div class="comment-section" id="comments-dokumen-${doc.__backendId}" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--light-grey);">
                <div class="comment-list" style="margin-bottom: 1rem;">
                  ${doc.comments.length === 0 ? '<p style="font-size: 0.85rem; color: var(--text-light);">Tiada komen lagi.</p>' : doc.comments.map(comment => `
                    <div style="padding: 0.5rem; background: var(--light-grey); border-radius: 8px; margin-bottom: 0.5rem;">
                      <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                        <strong style="font-size: 0.85rem;">${comment.author}</strong>
                        <span style="font-size: 0.75rem; color: var(--text-light);">${comment.date}</span>
                      </div>
                      <p style="font-size: 0.85rem; margin: 0;">${comment.text}</p>
                    </div>
                  `).join('')}
                </div>
                <div style="display: flex; gap: 0.5rem;">
                  <input type="text" class="comment-input" placeholder="Tulis komen..." style="flex: 1; padding: 0.5rem; border: 1px solid var(--light-blue); border-radius: 8px; font-size: 0.85rem;">
                  <button type="button" class="btn-submit-comment btn btn-primary" data-id="${doc.__backendId}" data-type="dokumen" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Hantar</button>
                </div>
              </div>
            </div>
            <a href="${doc.pdf_url}" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="font-size: 0.85rem; text-decoration: none; display: inline-block;">
              üì• Muat Turun
            </a>
          </div>
          ${currentUser ? `
            <div class="admin-controls visible" style="margin-top: 1rem;">
              <button type="button" class="btn btn-secondary btn-edit" data-id="${doc.__backendId}" data-type="dokumen">Edit</button>
              <button type="button" class="btn btn-danger btn-delete" data-id="${doc.__backendId}" data-type="dokumen">Padam</button>
            </div>
          ` : ''}
        </div>
      `).join('');
      
      attachInteractionListeners();
    }
    
    function renderPegawai() {
      const container = document.getElementById('pegawai-list');
      if (!container) return;
      
      const pegawaiData = getDataByType('pegawai');
      
      if (pegawaiData.length === 0 && isDataLoaded) {
        container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">Tiada pegawai tersedia.</p></div>';
        return;
      }
      
      const groupedByUnit = {};
      pegawaiData.forEach(pegawai => {
        if (!groupedByUnit[pegawai.unit]) {
          groupedByUnit[pegawai.unit] = [];
        }
        groupedByUnit[pegawai.unit].push(pegawai);
      });
      
      const sortedUnits = Object.keys(groupedByUnit).sort();
      
      let html = '';
      
      sortedUnits.forEach(unit => {
        html += `
          <div style="grid-column: 1 / -1; margin-top: 1.5rem; margin-bottom: 0.5rem;">
            <h3 style="color: var(--accent-blue); font-size: 1.3rem; font-weight: 600; padding-bottom: 0.5rem; border-bottom: 2px solid var(--light-blue);">
              üè¢ ${unit}
            </h3>
          </div>
        `;
        
        groupedByUnit[unit].forEach(pegawai => {
          const hasPhoto = pegawai.photo_url && pegawai.photo_url.trim() !== '';
          html += `
          <div class="card">
            <div style="text-align: center;">
              <div style="width: 120px; height: 120px; margin: 0 auto 1rem; border-radius: 50%; background: linear-gradient(135deg, var(--light-blue), var(--accent-blue)); display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; box-shadow: var(--shadow-soft); overflow: hidden; position: relative;">
                ${hasPhoto ? `
                  <img src="${pegawai.photo_url}" alt="${pegawai.name}" style="width: 100%; height: 100%; object-fit: cover; object-position: center top;" onerror="this.style.display='none'; this.parentElement.querySelector('.fallback-icon').style.display='flex';">
                  <span class="fallback-icon" style="font-size: 3rem; display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">üë§</span>
                ` : '<span style="font-size: 3rem;">üë§</span>'}
              </div>
              <h3 style="margin-bottom: 0.5rem; color: var(--text-dark);">${pegawai.name}</h3>
              <p style="color: var(--accent-blue); font-weight: 500; margin-bottom: 0.5rem;">${pegawai.position}</p>
              <p style="font-size: 0.85rem; color: var(--text-light);">üìß ${pegawai.email}</p>
            </div>
            ${currentUser ? `
              <div class="admin-controls visible" style="margin-top: 1rem;">
                <button type="button" class="btn btn-secondary btn-edit" data-id="${pegawai.__backendId}" data-type="pegawai">Edit</button>
                <button type="button" class="btn btn-danger btn-delete" data-id="${pegawai.__backendId}" data-type="pegawai">Padam</button>
              </div>
            ` : ''}
          </div>
          `;
        });
      });
      
      container.innerHTML = html;
      attachPegawaiListeners();
    }
    
    function attachPegawaiListeners() {
      if (currentUser) {
        document.querySelectorAll('.btn-edit[data-type="pegawai"]').forEach(btn => {
          btn.addEventListener('click', () => {
            const id = btn.dataset.id;
            const item = allData.find(d => d.__backendId === id);
            if (item) openModal('pegawai', item);
          });
        });
        
        document.querySelectorAll('.btn-delete[data-type="pegawai"]').forEach(btn => {
          btn.addEventListener('click', () => {
            const id = btn.dataset.id;
            const item = allData.find(d => d.__backendId === id);
            if (item) deleteItem(item);
          });
        });
      }
    }
    
    function renderBerita() {
      const container = document.getElementById('berita-list');
      if (!container) return;
      
      const beritaData = getDataByType('berita');
      
      if (beritaData.length === 0 && isDataLoaded) {
        container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">Tiada berita tersedia.</p></div>';
        return;
      }
      
      container.innerHTML = beritaData.map(berita => `
        <div class="card">
          <h3 style="margin-bottom: 0.5rem; color: var(--accent-blue);">üì∞ ${berita.title}</h3>
          
          ${berita.image_url && berita.image_url.trim() !== '' ? `
            <img src="${berita.image_url}" alt="${berita.title}" class="content-image" onerror="this.style.display='none'; this.alt='Gambar gagal dimuatkan';">
          ` : ''}
          
          <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 0.5rem;">${berita.content}</p>
          ${berita.author && berita.author !== 'Admin' ? `
            <p style="font-size: 0.85rem; color: var(--text-light); font-style: italic;">Disediakan oleh: ${berita.author}</p>
          ` : ''}
          
          <p style="font-size: 0.8rem; color: var(--text-light); margin-top: 0.5rem;">${berita.date}</p>
          
          <div style="display: flex; gap: 1rem; margin-top: 1rem; align-items: center;">
            <button type="button" class="btn-like" data-id="${berita.__backendId}" data-type="berita" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark); transition: all 0.3s ease;">
              <span style="font-size: 1.2rem;">‚ù§Ô∏è</span>
              <span class="like-count">${berita.likes}</span>
            </button>
            <button type="button" class="btn-view" data-id="${berita.__backendId}" data-type="berita" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üëÄ</span>
              <span class="view-count">${berita.views}</span>
            </button>
            <button type="button" class="btn-comment" data-id="${berita.__backendId}" data-type="berita" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üí¨</span>
              <span>${berita.comments.length}</span>
            </button>
          </div>
          
          <div class="comment-section" id="comments-berita-${berita.__backendId}" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--light-grey);">
            <div class="comment-list" style="margin-bottom: 1rem;">
              ${berita.comments.length === 0 ? '<p style="font-size: 0.85rem; color: var(--text-light);">Tiada komen lagi.</p>' : berita.comments.map(comment => `
                <div style="padding: 0.5rem; background: var(--light-grey); border-radius: 8px; margin-bottom: 0.5rem;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                    <strong style="font-size: 0.85rem;">${comment.author}</strong>
                    <span style="font-size: 0.75rem; color: var(--text-light);">${comment.date}</span>
                  </div>
                  <p style="font-size: 0.85rem; margin: 0;">${comment.text}</p>
                </div>
              `).join('')}
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <input type="text" class="comment-input" placeholder="Tulis komen..." style="flex: 1; padding: 0.5rem; border: 1px solid var(--light-blue); border-radius: 8px; font-size: 0.85rem;">
              <button type="button" class="btn-submit-comment btn btn-primary" data-id="${berita.__backendId}" data-type="berita" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Hantar</button>
            </div>
          </div>
          
          ${currentUser ? `
            <div class="admin-controls visible" style="margin-top: 1rem;">
              <button type="button" class="btn btn-secondary btn-edit" data-id="${berita.__backendId}" data-type="berita">Edit</button>
              <button type="button" class="btn btn-danger btn-delete" data-id="${berita.__backendId}" data-type="berita">Padam</button>
            </div>
          ` : ''}
        </div>
      `).join('');
      
      attachInteractionListeners();
    }
    
    function renderBukuPelawat() {
      const container = document.getElementById('visitor-comments');
      if (!container) return;
      
      const bukuPelawatData = getDataByType('buku_pelawat');
      
      if (bukuPelawatData.length === 0 && isDataLoaded) {
        container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">Tiada komen lagi.</p></div>';
        return;
      }
      
      container.innerHTML = bukuPelawatData.map(comment => `
        <div class="card">
          <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.5rem;">
            <div style="flex: 1;">
              <h4 style="margin-bottom: 0.25rem; color: var(--text-dark);">${comment.name}</h4>
              <p style="font-size: 0.8rem; color: var(--text-light);">${comment.date}</p>
            </div>
            ${currentUser ? `
              <button type="button" class="btn btn-danger btn-delete" data-id="${comment.__backendId}" data-type="buku_pelawat" style="font-size: 0.8rem; padding: 0.4rem 1rem;">Padam</button>
            ` : ''}
          </div>
          <p style="color: var(--text-dark); line-height: 1.6; margin-bottom: 1rem;">${comment.message}</p>
          
          <div style="display: flex; gap: 1rem; align-items: center; padding-top: 0.5rem; border-top: 1px solid var(--light-grey);">
            <button type="button" class="btn-like" data-id="${comment.__backendId}" data-type="buku_pelawat" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark); transition: all 0.3s ease;">
              <span style="font-size: 1.2rem;">‚ù§Ô∏è</span>
              <span class="like-count">${comment.likes}</span>
            </button>
            <button type="button" class="btn-view" data-id="${comment.__backendId}" data-type="buku_pelawat" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üëÄ</span>
              <span class="view-count">${comment.views}</span>
            </button>
            <button type="button" class="btn-comment" data-id="${comment.__backendId}" data-type="buku_pelawat" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üí¨</span>
              <span>${comment.comments.length}</span>
            </button>
          </div>
          
          <div class="comment-section" id="comments-buku_pelawat-${comment.__backendId}" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--light-grey);">
            <div class="comment-list" style="margin-bottom: 1rem;">
              ${comment.comments.length === 0 ? '<p style="font-size: 0.85rem; color: var(--text-light);">Tiada balasan lagi.</p>' : comment.comments.map(reply => `
                <div style="padding: 0.5rem; background: var(--light-grey); border-radius: 8px; margin-bottom: 0.5rem;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                    <strong style="font-size: 0.85rem;">${reply.author}</strong>
                    <span style="font-size: 0.75rem; color: var(--text-light);">${reply.date}</span>
                  </div>
                  <p style="font-size: 0.85rem; margin: 0;">${reply.text}</p>
                </div>
              `).join('')}
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <input type="text" class="comment-input" placeholder="Tulis balasan..." style="flex: 1; padding: 0.5rem; border: 1px solid var(--light-blue); border-radius: 8px; font-size: 0.85rem;">
              <button type="button" class="btn-submit-comment btn btn-primary" data-id="${comment.__backendId}" data-type="buku_pelawat" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Hantar</button>
            </div>
          </div>
        </div>
      `).join('');
      
      attachInteractionListeners();
    }
    
    function renderPerkongsian() {
      const container = document.getElementById('perkongsian-list');
      if (!container) return;
      
      const perkongsianData = getDataByType('perkongsian');
      
      if (perkongsianData.length === 0 && isDataLoaded) {
        container.innerHTML = '<div class="card"><p style="text-align: center; color: var(--text-light);">Tiada perkongsian tersedia.</p></div>';
        return;
      }
      
      container.innerHTML = perkongsianData.map(item => `
        <div class="card">
          <h3 style="margin-bottom: 0.5rem; color: var(--accent-blue);">üîó ${item.title}</h3>
          
          ${item.image_url && item.image_url.trim() !== '' ? `
            <img src="${item.image_url}" alt="${item.title}" class="content-image" onerror="this.style.display='none'; this.alt='Gambar gagal dimuatkan';">
          ` : ''}
          
          <p style="color: var(--text-light); line-height: 1.6; margin-bottom: 1rem;">${item.content}</p>
          
          <a href="${item.link_url}" target="_blank" rel="noopener noreferrer" class="btn btn-primary" style="text-decoration: none; display: inline-block; margin-bottom: 1rem;">
            üîó Lawati Pautan
          </a>
          
          <p style="font-size: 0.8rem; color: var(--text-light);">Dikongsi: ${item.date}</p>
          
          <div style="display: flex; gap: 1rem; margin-top: 1rem; align-items: center;">
            <button type="button" class="btn-like" data-id="${item.__backendId}" data-type="perkongsian" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark); transition: all 0.3s ease;">
              <span style="font-size: 1.2rem;">‚ù§Ô∏è</span>
              <span class="like-count">${item.likes}</span>
            </button>
            <button type="button" class="btn-view" data-id="${item.__backendId}" data-type="perkongsian" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üëÄ</span>
              <span class="view-count">${item.views}</span>
            </button>
            <button type="button" class="btn-comment" data-id="${item.__backendId}" data-type="perkongsian" style="background: none; border: none; cursor: pointer; display: flex; align-items: center; gap: 0.3rem; font-size: 0.9rem; color: var(--text-dark);">
              <span style="font-size: 1.2rem;">üí¨</span>
              <span>${item.comments.length}</span>
            </button>
          </div>
          
          <div class="comment-section" id="comments-perkongsian-${item.__backendId}" style="display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--light-grey);">
            <div class="comment-list" style="margin-bottom: 1rem;">
              ${item.comments.length === 0 ? '<p style="font-size: 0.85rem; color: var(--text-light);">Tiada komen lagi.</p>' : item.comments.map(comment => `
                <div style="padding: 0.5rem; background: var(--light-grey); border-radius: 8px; margin-bottom: 0.5rem;">
                  <div style="display: flex; justify-content: space-between; margin-bottom: 0.3rem;">
                    <strong style="font-size: 0.85rem;">${comment.author}</strong>
                    <span style="font-size: 0.75rem; color: var(--text-light);">${comment.date}</span>
                  </div>
                  <p style="font-size: 0.85rem; margin: 0;">${comment.text}</p>
                </div>
              `).join('')}
            </div>
            <div style="display: flex; gap: 0.5rem;">
              <input type="text" class="comment-input" placeholder="Tulis komen..." style="flex: 1; padding: 0.5rem; border: 1px solid var(--light-blue); border-radius: 8px; font-size: 0.85rem;">
              <button type="button" class="btn-submit-comment btn btn-primary" data-id="${item.__backendId}" data-type="perkongsian" style="font-size: 0.85rem; padding: 0.5rem 1rem;">Hantar</button>
            </div>
          </div>
          
          ${currentUser ? `
            <div class="admin-controls visible" style="margin-top: 1rem;">
              <button type="button" class="btn btn-secondary btn-edit" data-id="${item.__backendId}" data-type="perkongsian">Edit</button>
              <button type="button" class="btn btn-danger btn-delete" data-id="${item.__backendId}" data-type="perkongsian">Padam</button>
            </div>
          ` : ''}
        </div>
      `).join('');
      
      attachInteractionListeners();
    }
    
    function attachInteractionListeners() {
      document.querySelectorAll('.btn-like').forEach(btn => {
        btn.addEventListener('click', async () => {
          const id = btn.dataset.id;
          const item = allData.find(d => d.__backendId === id);
          
          if (item) {
            item.likes++;
            btn.querySelector('.like-count').textContent = item.likes;
            btn.style.transform = 'scale(1.2)';
            setTimeout(() => btn.style.transform = 'scale(1)', 200);
            await updateData(item, { likes: item.likes });
          }
        });
      });
      
      document.querySelectorAll('.btn-view').forEach(btn => {
        btn.addEventListener('click', async () => {
          const id = btn.dataset.id;
          const item = allData.find(d => d.__backendId === id);
          
          if (item) {
            item.views++;
            btn.querySelector('.view-count').textContent = item.views;
            await updateData(item, { views: item.views });
          }
        });
      });
      
      document.querySelectorAll('.btn-comment').forEach(btn => {
        btn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          const id = this.dataset.id;
          const type = this.dataset.type;
          const commentSection = document.getElementById(`comments-${type}-${id}`);
          
          if (commentSection) {
            if (commentSection.style.display === 'block') {
              commentSection.style.display = 'none';
            } else {
              commentSection.style.display = 'block';
            }
          }
        });
      });
      
      document.querySelectorAll('.btn-submit-comment').forEach(btn => {
        btn.addEventListener('click', async () => {
          const id = btn.dataset.id;
          const item = allData.find(d => d.__backendId === id);
          const commentInput = btn.previousElementSibling;
          const commentText = commentInput.value.trim();
          
          if (!commentText || !item) return;
          
          const newComment = {
            author: currentUser ? currentUser.username : 'Tetamu',
            text: commentText,
            date: new Date().toLocaleDateString('ms-MY', { day: 'numeric', month: 'short', year: 'numeric' })
          };
          
          item.comments.push(newComment);
          commentInput.value = '';
          
          await updateData(item, { comments: item.comments });
        });
      });
      
      // Attach edit and delete listeners for all types
      document.querySelectorAll('.btn-edit').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.dataset.id;
          const type = btn.dataset.type;
          const item = allData.find(d => d.__backendId === id);
          if (item) openModal(type, item);
        });
      });
      
      document.querySelectorAll('.btn-delete').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.dataset.id;
          const item = allData.find(d => d.__backendId === id);
          if (item) deleteItem(item);
        });
      });
    }
    
    // Buku pelawat form
    const formBukuPelawat = document.getElementById('form-buku-pelawat');
    const btnSubmitVisitor = document.getElementById('btn-submit-visitor');
    
    formBukuPelawat.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      btnSubmitVisitor.disabled = true;
      btnSubmitVisitor.innerHTML = '<span class="loading"></span> Menghantar...';
      
      const name = document.getElementById('visitor-name').value;
      const email = document.getElementById('visitor-email').value;
      const message = document.getElementById('visitor-message').value;
      
      const data = {
        name: name,
        email: email,
        message: message,
        date: new Date().toLocaleDateString('ms-MY', { day: 'numeric', month: 'long', year: 'numeric' }),
        likes: 0,
        views: 0,
        comments: []
      };
      
      const success = await createData('buku_pelawat', data);
      
      btnSubmitVisitor.disabled = false;
      btnSubmitVisitor.textContent = 'Hantar Komen';
      
      if (success) {
        formBukuPelawat.reset();
        
        const successMsg = document.createElement('div');
        successMsg.className = 'status-message status-success';
        successMsg.textContent = 'Terima kasih atas komen anda!';
        formBukuPelawat.appendChild(successMsg);
        setTimeout(() => successMsg.remove(), 3000);
      }
    });
    
    function renderStatistik() {
      const dokumenData = getDataByType('dokumen');
      const beritaData = getDataByType('berita');
      const bukuPelawatData = getDataByType('buku_pelawat');
      const perkongsianData = getDataByType('perkongsian');
      
      // Calculate totals
      let totalLikes = 0;
      let totalViews = 0;
      let totalComments = 0;
      
      [...dokumenData, ...beritaData, ...bukuPelawatData, ...perkongsianData].forEach(item => {
        totalLikes += item.likes || 0;
        totalViews += item.views || 0;
        totalComments += (item.comments || []).length;
      });
      
      // Update totals
      document.getElementById('total-likes').textContent = totalLikes;
      document.getElementById('total-views').textContent = totalViews;
      document.getElementById('total-comments').textContent = totalComments;
      
      // Render dokumen statistics
      const dokumenContainer = document.getElementById('statistik-dokumen');
      if (dokumenContainer) {
        if (dokumenData.length === 0) {
          dokumenContainer.innerHTML = '<p style="color: var(--text-light); text-align: center;">Tiada data dokumen.</p>';
        } else {
          dokumenContainer.innerHTML = `
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-bottom: 2px solid var(--light-blue);">
                    <th style="padding: 1rem; text-align: left; font-weight: 600;">Tajuk Dokumen</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">‚ù§Ô∏è Suka</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üëÄ Lihat</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üí¨ Komen</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üìÖ Tarikh</th>
                  </tr>
                </thead>
                <tbody>
                  ${dokumenData.map((doc, index) => `
                    <tr style="border-bottom: 1px solid var(--light-grey); ${index % 2 === 0 ? 'background: rgba(247, 250, 252, 0.5);' : ''}">
                      <td style="padding: 1rem;">${doc.title}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${doc.likes}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${doc.views}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${doc.comments.length}</td>
                      <td style="padding: 1rem; text-align: center; font-size: 0.85rem; color: var(--text-light);">${doc.date}</td>
                    </tr>
                  `).join('')}
                </tbody>
                <tfoot>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15)); font-weight: 700;">
                    <td style="padding: 1rem;">JUMLAH</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${dokumenData.reduce((sum, doc) => sum + doc.likes, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${dokumenData.reduce((sum, doc) => sum + doc.views, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${dokumenData.reduce((sum, doc) => sum + doc.comments.length, 0)}</td>
                    <td style="padding: 1rem;"></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          `;
        }
      }
      
      // Render berita statistics
      const beritaContainer = document.getElementById('statistik-berita');
      if (beritaContainer) {
        if (beritaData.length === 0) {
          beritaContainer.innerHTML = '<p style="color: var(--text-light); text-align: center;">Tiada data berita.</p>';
        } else {
          beritaContainer.innerHTML = `
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-bottom: 2px solid var(--light-blue);">
                    <th style="padding: 1rem; text-align: left; font-weight: 600;">Tajuk Berita</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">‚ù§Ô∏è Suka</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üëÄ Lihat</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üí¨ Komen</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üìÖ Tarikh</th>
                  </tr>
                </thead>
                <tbody>
                  ${beritaData.map((berita, index) => `
                    <tr style="border-bottom: 1px solid var(--light-grey); ${index % 2 === 0 ? 'background: rgba(247, 250, 252, 0.5);' : ''}">
                      <td style="padding: 1rem;">${berita.title}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${berita.likes}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${berita.views}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${berita.comments.length}</td>
                      <td style="padding: 1rem; text-align: center; font-size: 0.85rem; color: var(--text-light);">${berita.date}</td>
                    </tr>
                  `).join('')}
                </tbody>
                <tfoot>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15)); font-weight: 700;">
                    <td style="padding: 1rem;">JUMLAH</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${beritaData.reduce((sum, berita) => sum + berita.likes, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${beritaData.reduce((sum, berita) => sum + berita.views, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${beritaData.reduce((sum, berita) => sum + berita.comments.length, 0)}</td>
                    <td style="padding: 1rem;"></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          `;
        }
      }
      
      // Render buku pelawat statistics
      const bukuPelawatContainer = document.getElementById('statistik-buku-pelawat');
      if (bukuPelawatContainer) {
        if (bukuPelawatData.length === 0) {
          bukuPelawatContainer.innerHTML = '<p style="color: var(--text-light); text-align: center;">Tiada data buku pelawat.</p>';
        } else {
          bukuPelawatContainer.innerHTML = `
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-bottom: 2px solid var(--light-blue);">
                    <th style="padding: 1rem; text-align: left; font-weight: 600;">Nama Pelawat</th>
                    <th style="padding: 1rem; text-align: left; font-weight: 600;">Komen</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">‚ù§Ô∏è Suka</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üëÄ Lihat</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üí¨ Balasan</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üìÖ Tarikh</th>
                  </tr>
                </thead>
                <tbody>
                  ${bukuPelawatData.map((visitor, index) => `
                    <tr style="border-bottom: 1px solid var(--light-grey); ${index % 2 === 0 ? 'background: rgba(247, 250, 252, 0.5);' : ''}">
                      <td style="padding: 1rem;">${visitor.name}</td>
                      <td style="padding: 1rem; max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${visitor.message}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${visitor.likes}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${visitor.views}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${visitor.comments.length}</td>
                      <td style="padding: 1rem; text-align: center; font-size: 0.85rem; color: var(--text-light);">${visitor.date}</td>
                    </tr>
                  `).join('')}
                </tbody>
                <tfoot>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15)); font-weight: 700;">
                    <td style="padding: 1rem;" colspan="2">JUMLAH</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${bukuPelawatData.reduce((sum, visitor) => sum + visitor.likes, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${bukuPelawatData.reduce((sum, visitor) => sum + visitor.views, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${bukuPelawatData.reduce((sum, visitor) => sum + visitor.comments.length, 0)}</td>
                    <td style="padding: 1rem;"></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          `;
        }
      }
      
      // Render perkongsian statistics
      const perkongsianContainer = document.getElementById('statistik-perkongsian');
      if (perkongsianContainer) {
        if (perkongsianData.length === 0) {
          perkongsianContainer.innerHTML = '<p style="color: var(--text-light); text-align: center;">Tiada data perkongsian.</p>';
        } else {
          perkongsianContainer.innerHTML = `
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); border-bottom: 2px solid var(--light-blue);">
                    <th style="padding: 1rem; text-align: left; font-weight: 600;">Tajuk Perkongsian</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">‚ù§Ô∏è Suka</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üëÄ Lihat</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">üí¨ Komen</th>
                    <th style="padding: 1rem; text-align: center; font-weight: 600;">   Tarikh</th>
                  </tr>
                </thead>
                <tbody>
                  ${perkongsianData.map((item, index) => `
                    <tr style="border-bottom: 1px solid var(--light-grey); ${index % 2 === 0 ? 'background: rgba(247, 250, 252, 0.5);' : ''}">
                      <td style="padding: 1rem;">${item.title}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${item.likes}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${item.views}</td>
                      <td style="padding: 1rem; text-align: center; font-weight: 600; color: var(--accent-blue);">${item.comments.length}</td>
                      <td style="padding: 1rem; text-align: center; font-size: 0.85rem; color: var(--text-light);">${item.date}</td>
                    </tr>
                  `).join('')}
                </tbody>
                <tfoot>
                  <tr style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15)); font-weight: 700;">
                    <td style="padding: 1rem;">JUMLAH</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${perkongsianData.reduce((sum, item) => sum + item.likes, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${perkongsianData.reduce((sum, item) => sum + item.views, 0)}</td>
                    <td style="padding: 1rem; text-align: center; color: var(--accent-blue);">${perkongsianData.reduce((sum, item) => sum + item.comments.length, 0)}</td>
                    <td style="padding: 1rem;"></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          `;
        }
      }
    }
    
    function renderAllContent() {
      renderDokumen();
      renderPegawai();
      renderBerita();
      renderBukuPelawat();
      renderPerkongsian();
      renderStatistik();
    }
    
    function showStatus(element, message, type) {
      element.innerHTML = `<div class="status-message status-${type}">${message}</div>`;
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9abb4bf392782203',t:'MTc2NTM1NDU1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script> <script src="script.js"></script></body>

</html>
